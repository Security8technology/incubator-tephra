<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Tue Sep 04 23:45:10 PDT 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TransactionAware (Apache Tephra 0.14.0-incubating API)</title>
<meta name="date" content="2018-09-04">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TransactionAware (Apache Tephra 0.14.0-incubating API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TransactionAware.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/apache/tephra/TransactionAdmin.html" title="class in org.apache.tephra"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/apache/tephra/TransactionAwares.html" title="class in org.apache.tephra"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/apache/tephra/TransactionAware.html" target="_top">Frames</a></li>
<li><a href="TransactionAware.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.tephra</div>
<h2 title="Interface TransactionAware" class="title">Interface TransactionAware</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../org/apache/tephra/AbstractTransactionAwareTable.html" title="class in org.apache.tephra">AbstractTransactionAwareTable</a>, <a href="../../../org/apache/tephra/hbase/TransactionAwareHTable.html" title="class in org.apache.tephra.hbase">TransactionAwareHTable</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">TransactionAware</span></pre>
<div class="block">Interface to be implemented by a component that interacts with transaction logic.
 <p/>
 The client code that uses transaction logic looks like this:
 <pre>
  TransactionAware dataSet = // ...              // dataSet is one example of component that interacts with tx logic

  Transaction tx = txClient.start();
  dataSet.startTx(tx);                           // notifying about new transaction
  dataSet.write(...);
  // ... do other operations on dataSet
  Collection<byte[]> changes = dataSet.getTxChanges();
  boolean rollback = true;
  if (txClient.canCommit(changes)) {             // checking conflicts before commit, if none, commit tx
    if (dataSet.commitTx()) {                    // try persisting changes
      if (txClient.commit(tx)) {                 // if OK, make tx visible; if not - tx stays invisible to others
        dataSet.postTxCommit();                  // notifying dataset about tx commit success via callback
        rollback = false;
      }
    }
  }

  if (rollback) {                                // if there are conflicts (or cannot commit), try rollback changes
    if (dataSet.rollbackTx()) {                  // try undo changes
      txClient.abort(tx);                        // if OK, make tx visible; if not - tx stays invisible to others
    }
  }

 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/apache/tephra/TransactionAware.html#commitTx--">commitTx</a></span>()</code>
<div class="block">Called before transaction has been committed.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/apache/tephra/TransactionAware.html#getTransactionAwareName--">getTransactionAwareName</a></span>()</code>
<div class="block">Used for error reporting.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;byte[]&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/apache/tephra/TransactionAware.html#getTxChanges--">getTxChanges</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/apache/tephra/TransactionAware.html#postTxCommit--">postTxCommit</a></span>()</code>
<div class="block">Called after transaction has been committed.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/apache/tephra/TransactionAware.html#rollbackTx--">rollbackTx</a></span>()</code>
<div class="block">Called during transaction rollback (for whatever reason: conflicts, errors, etc.).</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/apache/tephra/TransactionAware.html#startTx-org.apache.tephra.Transaction-">startTx</a></span>(<a href="../../../org/apache/tephra/Transaction.html" title="class in org.apache.tephra">Transaction</a>&nbsp;tx)</code>
<div class="block">Called when new transaction has started.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/apache/tephra/TransactionAware.html#updateTx-org.apache.tephra.Transaction-">updateTx</a></span>(<a href="../../../org/apache/tephra/Transaction.html" title="class in org.apache.tephra">Transaction</a>&nbsp;tx)</code>
<div class="block">Called when the state of the current transaction has been updated.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="startTx-org.apache.tephra.Transaction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startTx</h4>
<pre>void&nbsp;startTx(<a href="../../../org/apache/tephra/Transaction.html" title="class in org.apache.tephra">Transaction</a>&nbsp;tx)</pre>
<div class="block">Called when new transaction has started.  This may reset any state which has been left behind by the previous
 transaction.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tx</code> - transaction info</dd>
</dl>
</li>
</ul>
<a name="updateTx-org.apache.tephra.Transaction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateTx</h4>
<pre>void&nbsp;updateTx(<a href="../../../org/apache/tephra/Transaction.html" title="class in org.apache.tephra">Transaction</a>&nbsp;tx)</pre>
<div class="block">Called when the state of the current transaction has been updated.  This should replace any reference to the
 current <a href="../../../org/apache/tephra/Transaction.html" title="class in org.apache.tephra"><code>Transaction</code></a> held by this <code>TransactionAware</code>, but should <strong>not</strong> reset
 any state (such as the write change sets) that is currently maintained.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tx</code> - the updated transaction</dd>
</dl>
</li>
</ul>
<a name="getTxChanges--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTxChanges</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;byte[]&gt;&nbsp;getTxChanges()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>changes made by current transaction to be used for conflicts detection before commit.</dd>
</dl>
</li>
</ul>
<a name="commitTx--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitTx</h4>
<pre>boolean&nbsp;commitTx()
          throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Called before transaction has been committed.
 Can be used e.g. to flush changes cached in-memory to persistent store.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if transaction can be committed, otherwise false.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd>
</dl>
</li>
</ul>
<a name="postTxCommit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>postTxCommit</h4>
<pre>void&nbsp;postTxCommit()</pre>
<div class="block">Called after transaction has been committed.
 Can be used e.g. evict entries from a cache etc. Because this is called after the transaction is committed,
 the success or failure of the transaction cannot depend on it. Hence this method returns nothing and it is not
 expected to throw exceptions.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html?is-external=true" title="class or interface in java.lang">RuntimeException</a></code> - in case of serious failure that should not be ignored.</dd>
</dl>
</li>
</ul>
<a name="rollbackTx--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollbackTx</h4>
<pre>boolean&nbsp;rollbackTx()
            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Called during transaction rollback (for whatever reason: conflicts, errors, etc.).</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if all changes made during transaction were rolled back, false otherwise (e.g. if more cleanup needed
         or changes cannot be undone). True also means that this transaction can be made visible to others without
         breaking consistency of the data: since all changes were undone there's "nothing to see".</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd>
</dl>
</li>
</ul>
<a name="getTransactionAwareName--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getTransactionAwareName</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getTransactionAwareName()</pre>
<div class="block">Used for error reporting.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TransactionAware.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/apache/tephra/TransactionAdmin.html" title="class in org.apache.tephra"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/apache/tephra/TransactionAwares.html" title="class in org.apache.tephra"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/apache/tephra/TransactionAware.html" target="_top">Frames</a></li>
<li><a href="TransactionAware.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2018 <a href="http://www.apache.org">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
